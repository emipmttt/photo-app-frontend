(function(e){function t(t){for(var r,o,i=t[0],s=t[1],l=t[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(f.length)f.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},c=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"15b8":function(e,t,n){e.exports=n.p+"img/colgate-logo-background.d4a6c59d.png"},"16b2":function(e,t,n){"use strict";n("5c24")},"19cb":function(e,t,n){e.exports=n.p+"img/santa-02.fae3126a.png"},2157:function(e,t,n){"use strict";n("2721")},2721:function(e,t,n){},2931:function(e,t,n){e.exports=n.p+"img/flip_camera.36998811.svg"},"49d0":function(e,t,n){e.exports=n.p+"img/santa-03.c1055c88.png"},"50e6":function(e,t,n){"use strict";n("c158")},5177:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function a(e,t,n,a,c,o){var i=Object(r["y"])("router-view");return Object(r["r"])(),Object(r["f"])(i)}n("bf3b");var c={};n("16b2");c.render=a;var o=c,i=n("9483");Object(i["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var s=n("6c02"),l=Object(r["E"])("data-v-9f24801e");Object(r["u"])("data-v-9f24801e");var u={class:"second-step__santa"},d={class:"second-step__santa__logo-container primary"},f={class:"text-center mt-10"},p=Object(r["i"])("h1",{class:"font-normal italic text-3xl md:text-5xl white--text"},[Object(r["h"])(" ¡Tomate una "),Object(r["i"])("br"),Object(r["h"])(" foto con Santa! ")],-1),h=Object(r["i"])("p",{class:"white--text mt-5"}," Da clic en el botón de abajo y vive esta experiencia navideña ",-1);Object(r["s"])();var b=l((function(e,t,a,c,o,i){return Object(r["r"])(),Object(r["f"])(r["b"],{name:"fade"},{default:l((function(){return[o.splash?(Object(r["r"])(),Object(r["f"])("main",{key:0,class:"first-step flex justify-center align-center items-center",style:"background:url('".concat(n("df4e"),"'); background-size: cover; background-position:center ;")},[Object(r["i"])("img",{class:"first-step__logo",src:n("85cf")},null,8,["src"])],4)):(Object(r["r"])(),Object(r["f"])("main",{key:1,class:"second-step primary",style:"background-image:url('".concat(n("8775"),"'); background-size: cover; background-position:center ;")},[Object(r["i"])("div",u,[Object(r["i"])("div",d,[Object(r["i"])("img",{src:n("85cf"),alt:""},null,8,["src"])]),Object(r["i"])("img",{class:"second-step__santa__image",src:n("7523"),alt:""},null,8,["src"])]),Object(r["i"])("div",f,[p,h,Object(r["i"])("button",{onClick:t[1]||(t[1]=function(t){return e.$router.push("/camara")}),class:"btn white primary--text mt-10"}," Comenzar ")])],4))]})),_:1})}));n("90ab");var m={data:function(){return{splash:!0}},methods:{start:function(){var e=this;setTimeout((function(){e.splash=!1}),2e3)}},mounted:function(){this.start()}};n("9293");m.render=b,m.__scopeId="data-v-9f24801e";var g=m,v={class:"camera-container"},j={class:"camera-container__logo-container"},O={ref:"camera",class:"camera-container__image"},y={id:"video",ref:"video","webkit-playsinline":"true",playsinline:"true"},x={class:"camera-container__controls"},w={class:"white--text"},k={key:1,class:"snap-animation"},_={ref:"canvas"};function C(e,t,a,c,o,i){var s=Object(r["y"])("Filter"),l=Object(r["y"])("router-link"),u=Object(r["y"])("ChangeCamera"),d=Object(r["y"])("Counter"),f=Object(r["y"])("Loading");return Object(r["r"])(),Object(r["f"])(r["a"],null,[Object(r["i"])("div",v,[Object(r["i"])("div",j,[Object(r["i"])("img",{src:n("15b8"),alt:""},null,8,["src"])]),Object(r["i"])("div",O,[Object(r["i"])(s),Object(r["i"])("video",y,null,512)],512),Object(r["i"])("div",x,[Object(r["i"])("span",w,[Object(r["i"])(l,{to:"/"},{default:Object(r["D"])((function(){return[Object(r["i"])("img",{style:{width:"30px"},src:n("6fe7")},null,8,["src"])]})),_:1})]),Object(r["i"])("button",{onClick:t[1]||(t[1]=function(){return i.snap.apply(i,arguments)})},[Object(r["i"])("img",{src:n("eae6"),alt:""},null,8,["src"])]),Object(r["i"])(u,{onChange:t[2]||(t[2]=function(e){return i.changeCamera(e)})})])]),o.showCounter?(Object(r["r"])(),Object(r["f"])(d,{key:0,counter:o.counter},null,8,["counter"])):Object(r["g"])("",!0),o.showSnap?(Object(r["r"])(),Object(r["f"])("div",k,".")):Object(r["g"])("",!0),Object(r["i"])("canvas",_,null,512),o.loading?(Object(r["r"])(),Object(r["f"])(f,{key:2})):Object(r["g"])("",!0)],64)}n("4160"),n("ac1f"),n("5319"),n("159b"),n("96cf");var S=n("1da1"),I=n("bc3a"),$=n.n(I),M=$.a.create({baseURL:"https://photo-filter-backend.herokuapp.com/"}),P={class:"modal-counter"},T={class:"white--text"};function D(e,t,n,a,c,o){return Object(r["r"])(),Object(r["f"])("div",P,[Object(r["i"])("h1",T,[Object(r["i"])("i",null,Object(r["A"])(n.counter),1)])])}var E={props:{counter:Boolean}};n("81ad");E.render=D;var H=E;function z(e,t,n,a,c,o){return Object(r["r"])(),Object(r["f"])(r["c"],{name:"fade",tag:"div"},{default:Object(r["D"])((function(){return[(Object(r["r"])(!0),Object(r["f"])(r["a"],null,Object(r["x"])(c.santaItems,(function(e,t){return Object(r["r"])(),Object(r["f"])(r["a"],null,[c.currentSanta==t?(Object(r["r"])(),Object(r["f"])("img",{key:t,draggable:"false",ref:"filter",id:"filter",style:{left:"0px",top:"0px"},class:"filter",src:e},null,8,["src"])):Object(r["g"])("",!0)],64)})),256))]})),_:1})}n("4de4");var L={data:function(){return{currentSanta:0,santaItems:[n("7e00"),n("19cb"),n("49d0")],timeout:2e3}},methods:{mouseUp:function(){window.removeEventListener("mousemove",this.divMove,!0),window.removeEventListener("touchmove",this.divMove,!0)},mouseDown:function(e){window.addEventListener("mousemove",this.divMove,!0),window.addEventListener("touchmove",this.divMove,!0)},divMove:function(e){var t=this.$refs.filter;t.style.position="absolute",t.style.top=e.clientY-t.clientHeight/2+"px",t.style.left=e.clientX-t.clientWidth/2+"px"},changeImage:function(){var e=this;this.santaItems.length-1>=this.currentSanta+1?(this.currentSanta++,setTimeout((function(){e.changeImage()}),this.timeout)):console.log(this.santaItems.length-1,this.currentSanta+1)}},mounted:function(){var e=this;setTimeout((function(){e.changeImage()}),this.timeout)}};n("50e6");L.render=z;var U=L,q=Object(r["E"])("data-v-5bec8f00");Object(r["u"])("data-v-5bec8f00");var R=Object(r["i"])("h1",{class:"text-3xl italic white--text"},"Cargando ...",-1);Object(r["s"])();var W=q((function(e,t,a,c,o,i){return Object(r["r"])(),Object(r["f"])("div",{class:"background",style:"background:url('".concat(n("df4e"),"'); background-size: cover; background-position:center ;")},[R],4)})),A={};n("d9c5");A.render=W,A.__scopeId="data-v-5bec8f00";var F=A;function N(e,t,a,c,o,i){return Object(r["r"])(),Object(r["f"])("img",{onClick:t[1]||(t[1]=function(){return i.changeDevices.apply(i,arguments)}),style:{width:"30px"},src:n("2931")},null,8,["src"])}var B={data:function(){return{cameras:[],cameraSelected:0}},methods:{changeDevices:function(){this.cameras.length-1>this.cameraSelected+1?this.cameraSelected=this.cameraSelected+1:this.cameraSelected=0,this.$emit("change",this.cameras[this.cameraSelected])},gotDevices:function(e){this.cameras=[];var t=[];e.forEach((function(e){"videoinput"===e.kind&&t.push(e.deviceId)})),this.cameras=t}},mounted:function(){navigator.mediaDevices.enumerateDevices().then(this.gotDevices)}};B.render=N;var J=B,V={components:{Counter:H,Filter:U,ChangeCamera:J,Loading:F},data:function(){return{video:null,canvas:null,context:null,stream:null,alertMessage:"",showCounter:!1,showSnap:!1,counter:3,counterInterval:null,loading:!1}},methods:{changeCamera:function(e){var t=this;"undefined"!==typeof this.stream&&this.stream.getTracks().forEach((function(e){e.stop()}));var n={};n.deviceId={exact:e};var r={video:n,audio:!1};navigator.mediaDevices.getUserMedia(r).then((function(e){e?(t.$refs.video.srcObject=e,t.alertMessage=""):(alert("no pudimos acceder a tu camara"),t.$router.push("/")),t.$refs.video.play()})).then().catch((function(e){console.error(e)}))},drawImage:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$refs.canvas.style.display="initial",e.$refs.canvas.width=video.clientWidth,e.$refs.canvas.height=video.clientHeight,e.context.drawImage(video,0,0,video.clientWidth,video.clientHeight),n=document.querySelector("#filter"),e.context.drawImage(n,parseInt(n.style.left.replace(/px/,"")),parseInt(n.style.top.replace(/px/,"")),n.clientWidth,n.clientHeight),e.context.drawImage(document.querySelector(".camera-container__logo-container img"),20,0,document.querySelector(".camera-container__logo-container img").clientWidth,document.querySelector(".camera-container__logo-container img").clientHeight),document.querySelector("body").clientHeight,window.scrollTo(0,2*document.querySelector("video").clientHeight),console.log(parseInt(n.style.left.replace(/px/,"")),parseInt(n.style.top.replace(/px/,"")),parseInt(n.style.left.replace(/px/,""))+n.clientWidth,parseInt(n.style.top.replace(/px/,""))+n.clientHeight),r=e.$refs.canvas.toDataURL("image/png"),t.next=13,M.post("/file",{image:r});case 13:a=t.sent,window.scrollTo(0,0),e.loading=!1,e.$router.push("/foto"+a.data.data.replace(/storage/g,""));case 17:case"end":return t.stop()}}),t)})))()},snap:function(){var e=this;this.showCounter=!0,this.counterInterval=setInterval((function(){e.counter--,e.counter<0&&(clearInterval(e.counterInterval),e.showCounter=!1,e.showSnap=!0,e.counter=3,e.drawImage(),console.log(e.stream),e.stream.getTracks().forEach((function(e){return e.stop()})),e.$refs.video.pause(),e.loading=!0,setTimeout((function(){e.showSnap=!1}),1e3))}),1e3)},initCamera:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.context=e.$refs.canvas.getContext("2d"),n={video:{facingMode:"user"},audio:!1},t.prev=2,t.next=5,navigator.mediaDevices.getUserMedia(n);case 5:r=t.sent,e.streamCamera(r),e.alertMessage="",t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),alert("no pudimos acceder a tu camara"),e.$router.push("/");case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()},streamCamera:function(e){this.stream=e,e?(this.$refs.video.srcObject=e,this.alertMessage=""):(alert("no pudimos acceder a tu camara"),this.$router.push("/")),this.$refs.video.play()},resizeCamera:function(){var e=window.innerHeight||document.body.clientHeight;if(this.$refs.video.clientHeight>e){var t=e,n=this.$refs.video.clientHeight,r=100*n/t,a=r/100;this.$refs.camera.style.transform="scale(".concat(1-(a-1.1),")"),this.$refs.camera.style.marginTop="-".concat(1.5*parseInt(r),"px")}else this.$refs.camera.style.marginTop="0px",this.$refs.camera.style.transform="scale(1)"}},mounted:function(){window.scrollTo(0,0),this.initCamera(),window.onresize=this.resizeCamera,this.$refs.video.addEventListener("loadeddata",this.resizeCamera),this.resizeCamera()}};n("df8d");V.render=C;var G=V,X={class:"text-center md:text-left md:flex items-center"},Y={class:"polaroid-container"},K=Object(r["i"])("h1",{class:"text-3xl md:text-5xl white--text"},[Object(r["i"])("i",null,"Compartir")],-1),Q={class:"btn white primary--text mt-10"},Z={class:"fb-share-button","data-href":"https://emipmttt.github.io/photo-app-frontend/#/foto/1606361246632.png","data-layout":"button","data-size":"small"},ee={class:"btn white primary--text mt-10",style:{background:"#3a559f"}},te=Object(r["i"])("br",null,null,-1),ne=Object(r["i"])("br",null,null,-1),re=Object(r["i"])("h1",{class:"text-3xl md:text-5xl white--text"},[Object(r["i"])("i",null,"Guardar foto")],-1),ae=Object(r["i"])("button",{class:"btn white primary--text mt-10"},"descargar foto",-1),ce=Object(r["i"])("br",null,null,-1);function oe(e,t,a,c,o,i){return Object(r["r"])(),Object(r["f"])("main",{class:"primary flex justify-center align-center items-center",style:"background-image:url('".concat(n("8775"),"');  background-position:center ;")},[Object(r["i"])("section",X,[Object(r["i"])("div",Y,[Object(r["i"])("img",{src:o.photoPath,alt:""},null,8,["src"])]),Object(r["i"])("div",null,[K,i.verifySupportShare()?(Object(r["r"])(),Object(r["f"])("a",{key:0,onClick:t[1]||(t[1]=function(){return i.share.apply(i,arguments)}),target:"_blank",download:"navidad.png",class:"ma-4"},[Object(r["i"])("button",Q,[Object(r["i"])("img",{style:{width:"40px"},src:n("b551")},null,8,["src"])])])):Object(r["g"])("",!0),Object(r["i"])("div",Z,[Object(r["i"])("a",{href:"https://www.facebook.com/sharer/sharer.php?u=".concat(i.encodeUrl(),"&src=sdkpreparse"),target:"_blank",download:"navidad.png"},[Object(r["i"])("button",ee,[Object(r["i"])("img",{src:n("c949"),style:{width:"40px"}},null,8,["src"])])],8,["href"])]),te,ne,re,Object(r["i"])("a",{href:o.photoPath,download:"navidad.png",target:"_blank"},[ae],8,["href"]),ce,Object(r["i"])("button",{onClick:t[2]||(t[2]=function(t){return e.$router.push("/")}),class:"btn white primary--text mt-10"}," Volver a Vivir la experiencia ")])])],4)}var ie={data:function(){return{photoPath:"",sharePath:""}},methods:{verifySupportShare:function(){return!!navigator.share},share:function(){navigator.share({title:"Colgate Santa",url:this.photoPath})},encodeUrl:function(){var e=this.photoPath+"";return e=encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/~/g,"%7E"),e}},created:function(){this.photoPath="https://photo-filter-backend.herokuapp.com/"+this.$route.params.photo,this.sharePath=location.href}};n("2157");ie.render=oe;var se=ie,le=[{path:"/",name:"Tutorial",component:g},{path:"/camara",name:"Camera",component:G},{path:"/foto/:photo",name:"Photo",component:se}],ue=Object(s["a"])({history:Object(s["b"])(),routes:le}),de=ue,fe=n("5502"),pe=Object(fe["a"])({state:{},mutations:{},actions:{},modules:{}});Object(r["e"])(o).use(pe).use(de).mount("#app")},"5c24":function(e,t,n){},"6fe7":function(e,t,n){e.exports=n.p+"img/arrow_back.7e4304aa.svg"},7523:function(e,t,n){e.exports=n.p+"img/bg-screen-2.fadaf3e9.png"},"7cc2":function(e,t,n){},"7e00":function(e,t,n){e.exports=n.p+"img/santa-01.459a15d2.png"},"81ad":function(e,t,n){"use strict";n("c4be")},"85cf":function(e,t,n){e.exports=n.p+"img/colgate-logo.2f5c2d3c.png"},8775:function(e,t,n){e.exports=n.p+"img/pattern.f1a509e3.png"},"90ab":function(e,t,n){},9293:function(e,t,n){"use strict";n("5177")},ac14:function(e,t,n){},b551:function(e,t,n){e.exports=n.p+"img/share.c9535446.svg"},bf3b:function(e,t,n){},c158:function(e,t,n){},c4be:function(e,t,n){},c949:function(e,t,n){e.exports=n.p+"img/facebook.25563ad1.png"},d9c5:function(e,t,n){"use strict";n("7cc2")},df4e:function(e,t,n){e.exports=n.p+"img/bg-screen-1.ff7c6ff4.png"},df8d:function(e,t,n){"use strict";n("ac14")},eae6:function(e,t,n){e.exports=n.p+"img/camera.43754f28.svg"}});
//# sourceMappingURL=app.2a25571a.js.map