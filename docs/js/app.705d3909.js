(function(e){function t(t){for(var r,o,i=t[0],s=t[1],l=t[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(f.length)f.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},c=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"016e":function(e,t,n){e.exports=n.p+"img/s1.cd870e19.gif"},1012:function(e,t,n){"use strict";n("264f")},"16b2":function(e,t,n){"use strict";n("5c24")},"264f":function(e,t,n){},2931:function(e,t,n){e.exports=n.p+"img/flip_camera.36998811.svg"},5177:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function a(e,t,n,a,c,o){var i=Object(r["w"])("router-view");return Object(r["q"])(),Object(r["e"])(i)}n("bf3b");var c={};n("16b2");c.render=a;var o=c,i=n("9483");Object(i["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var s=n("6c02"),l=Object(r["C"])("data-v-9f24801e");Object(r["t"])("data-v-9f24801e");var u={class:"second-step__santa"},d={class:"second-step__santa__logo-container primary"},f={class:"text-center mt-10"},h=Object(r["h"])("h1",{class:"font-normal italic text-3xl md:text-5xl white--text"},[Object(r["g"])(" ¡Tomate una "),Object(r["h"])("br"),Object(r["g"])(" foto con Santa! ")],-1),p=Object(r["h"])("p",{class:"white--text mt-5"}," Da clic en el botón de abajo y vive esta experiencia navideña ",-1);Object(r["r"])();var m=l((function(e,t,a,c,o,i){return Object(r["q"])(),Object(r["e"])(r["b"],{name:"fade"},{default:l((function(){return[o.splash?(Object(r["q"])(),Object(r["e"])("main",{key:0,class:"first-step flex justify-center align-center items-center",style:"background:url('".concat(n("df4e"),"'); background-size: cover; background-position:center ;")},[Object(r["h"])("img",{class:"first-step__logo",src:n("85cf")},null,8,["src"])],4)):(Object(r["q"])(),Object(r["e"])("main",{key:1,class:"second-step primary",style:"background-image:url('".concat(n("8775"),"'); background-size: cover; background-position:center ;")},[Object(r["h"])("div",u,[Object(r["h"])("div",d,[Object(r["h"])("img",{src:n("85cf"),alt:""},null,8,["src"])]),Object(r["h"])("img",{class:"second-step__santa__image",src:n("7523"),alt:""},null,8,["src"])]),Object(r["h"])("div",f,[h,p,Object(r["h"])("button",{onClick:t[1]||(t[1]=function(t){return e.$router.push("/camara")}),class:"btn white primary--text mt-10"}," Comenzar ")])],4))]})),_:1})}));n("90ab");var v={data:function(){return{splash:!0}},methods:{start:function(){var e=this;setTimeout((function(){e.splash=!1}),2e3)}},mounted:function(){this.start()}};n("9293");v.render=m,v.__scopeId="data-v-9f24801e";var b=v,g={class:"camera-container"},j={ref:"camera",class:"camera-container__image"},O={id:"video",ref:"video","webkit-playsinline":"true",playsinline:"true"},w={class:"camera-container__controls"},y={class:"white--text"},x={key:1,class:"snap-animation"},k={ref:"canvas"};function C(e,t,a,c,o,i){var s=Object(r["w"])("Filter"),l=Object(r["w"])("router-link"),u=Object(r["w"])("ChangeCamera"),d=Object(r["w"])("Counter");return Object(r["q"])(),Object(r["e"])(r["a"],null,[Object(r["h"])("div",g,[Object(r["h"])("div",j,[Object(r["h"])(s),Object(r["h"])("video",O,null,512)],512),Object(r["h"])("div",w,[Object(r["h"])("span",y,[Object(r["h"])(l,{to:"/"},{default:Object(r["B"])((function(){return[Object(r["h"])("img",{style:{width:"30px"},src:n("6fe7")},null,8,["src"])]})),_:1})]),Object(r["h"])("button",{onClick:t[1]||(t[1]=function(){return i.snap.apply(i,arguments)})},[Object(r["h"])("img",{src:n("eae6"),alt:""},null,8,["src"])]),Object(r["h"])(u,{onChange:t[2]||(t[2]=function(e){return i.changeCamera(e)})})])]),o.showCounter?(Object(r["q"])(),Object(r["e"])(d,{key:0,counter:o.counter},null,8,["counter"])):Object(r["f"])("",!0),o.showSnap?(Object(r["q"])(),Object(r["e"])("div",x,".")):Object(r["f"])("",!0),Object(r["h"])("canvas",k,null,512)],64)}n("4160"),n("ac1f"),n("5319"),n("159b"),n("96cf");var _=n("1da1"),$=n("bc3a"),S=n.n($),I=S.a.create({baseURL:"https://photo-filter-backend.herokuapp.com/"}),M={class:"modal-counter"},q={class:"white--text"};function D(e,t,a,c,o,i){return Object(r["q"])(),Object(r["e"])("div",M,[Object(r["h"])("img",{src:n("864d")},null,8,["src"]),Object(r["h"])("h1",q,Object(r["y"])(a.counter),1)])}var P={props:{counter:Boolean}};n("9b62");P.render=D;var T=P;function E(e,t,a,c,o,i){return Object(r["q"])(),Object(r["e"])("img",{draggable:"false",ref:"filter",id:"filter",style:{left:"0px",top:"0px"},class:"filter",src:n("016e"),onMousedown:t[1]||(t[1]=function(){return i.mouseDown.apply(i,arguments)}),onTouchstart:t[2]||(t[2]=function(){return i.mouseDown.apply(i,arguments)})},null,40,["src"])}n("4de4");var H={methods:{mouseUp:function(){window.removeEventListener("mousemove",this.divMove,!0),window.removeEventListener("touchmove",this.divMove,!0)},mouseDown:function(e){window.addEventListener("mousemove",this.divMove,!0),window.addEventListener("touchmove",this.divMove,!0)},divMove:function(e){var t=this.$refs.filter;t.style.position="absolute",t.style.top=e.clientY-t.clientHeight/2+"px",t.style.left=e.clientX-t.clientWidth/2+"px"}},mounted:function(){window.addEventListener("mouseup",this.mouseUp,!1),window.addEventListener("touchleave",this.mouseUp,!1),document.querySelector("#video").addEventListener("click",this.divMove)}};n("1012");H.render=E;var L=H;function z(e,t,a,c,o,i){return Object(r["q"])(),Object(r["e"])("img",{onClick:t[1]||(t[1]=function(){return i.changeDevices.apply(i,arguments)}),style:{width:"30px"},src:n("2931")},null,8,["src"])}var U={data:function(){return{cameras:[],cameraSelected:0}},methods:{changeDevices:function(){this.cameras.length-1>this.cameraSelected+1?this.cameraSelected=this.cameraSelected+1:this.cameraSelected=0,alert(this.cameraSelected+" "+this.cameras[this.cameraSelected]),this.$emit("change",this.cameras[this.cameraSelected])},gotDevices:function(e){console.log("lel"),this.cameras=[];var t=[];e.forEach((function(e){"videoinput"===e.kind&&t.push(e.deviceId)})),this.cameras=t,alert(this.cameras)}},mounted:function(){navigator.mediaDevices.enumerateDevices().then(this.gotDevices)}};U.render=z;var R=U,W={components:{Counter:T,Filter:L,ChangeCamera:R},data:function(){return{video:null,canvas:null,context:null,stream:null,alertMessage:"",showCounter:!1,showSnap:!1,counter:3,counterInterval:null}},methods:{changeCamera:function(e){var t=this;"undefined"!==typeof this.stream&&this.stream.getTracks().forEach((function(e){e.stop()}));var n={};n.deviceId={exact:e};var r={video:n,audio:!1};navigator.mediaDevices.getUserMedia(r).then((function(e){e?(t.$refs.video.srcObject=e,t.alertMessage=""):(alert("no pudimos acceder a tu camara"),t.$router.push("/")),t.$refs.video.play()})).then().catch((function(e){console.error(e)}))},drawImage:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$refs.canvas.style.display="initial",e.$refs.canvas.width=video.clientWidth,e.$refs.canvas.height=video.clientHeight,e.context.drawImage(video,0,0,video.clientWidth,video.clientHeight),n=document.querySelector("#filter"),e.context.drawImage(n,parseInt(n.style.left.replace(/px/,"")),parseInt(n.style.top.replace(/px/,"")),n.clientWidth,n.clientHeight),document.querySelector("body").clientHeight,window.scrollTo(0,2*document.querySelector("video").clientHeight),console.log(parseInt(n.style.left.replace(/px/,"")),parseInt(n.style.top.replace(/px/,"")),parseInt(n.style.left.replace(/px/,""))+n.clientWidth,parseInt(n.style.top.replace(/px/,""))+n.clientHeight),r=e.$refs.canvas.toDataURL("image/png"),t.next=12,I.post("/file",{image:r});case 12:a=t.sent,window.scrollTo(0,0),e.$router.push("/foto"+a.data.data.replace(/storage/g,""));case 15:case"end":return t.stop()}}),t)})))()},snap:function(){var e=this;this.showCounter=!0,this.counterInterval=setInterval((function(){e.counter--,e.counter<0&&(clearInterval(e.counterInterval),e.showCounter=!1,e.showSnap=!0,e.counter=3,e.drawImage(),setTimeout((function(){e.showSnap=!1}),1e3))}),1e3)},initCamera:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.context=e.$refs.canvas.getContext("2d"),n={video:{facingMode:"user"},audio:!1},t.prev=2,t.next=5,navigator.mediaDevices.getUserMedia(n);case 5:r=t.sent,e.streamCamera(r),e.alertMessage="",t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),alert("no pudimos acceder a tu camara"),e.$router.push("/");case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()},streamCamera:function(e){this.stream=e,e?(this.$refs.video.srcObject=e,this.alertMessage=""):(alert("no pudimos acceder a tu camara"),this.$router.push("/")),this.$refs.video.play()},resizeCamera:function(){var e=window.innerHeight||document.body.clientHeight;if(this.$refs.video.clientHeight>e){var t=e,n=this.$refs.video.clientHeight,r=100*n/t,a=r/100;this.$refs.camera.style.transform="scale(".concat(1-(a-1.1),")"),this.$refs.camera.style.marginTop="-".concat(1.5*parseInt(r),"px")}else this.$refs.camera.style.marginTop="0px",this.$refs.camera.style.transform="scale(1)"}},mounted:function(){window.scrollTo(0,0),this.initCamera(),window.onresize=this.resizeCamera,this.$refs.video.addEventListener("loadeddata",this.resizeCamera),this.resizeCamera()}};n("c44a");W.render=C;var F=W,A={class:"primary-gradient flex justify-center align-center items-center"},B={class:"text-center md:text-left md:flex items-center"},N={class:"polaroid-container"},J=Object(r["h"])("h1",{class:"text-3xl md:text-5xl"},[Object(r["g"])(" ¡Gracias por Participar "),Object(r["h"])("br"),Object(r["g"])(" en la experiencia! ")],-1),V=Object(r["h"])("br",null,null,-1),G=Object(r["h"])("button",{class:"btn white primary--text mt-10"},"descargar foto",-1),X=Object(r["h"])("br",null,null,-1);function Y(e,t,n,a,c,o){return Object(r["q"])(),Object(r["e"])("main",A,[Object(r["h"])("section",B,[Object(r["h"])("div",N,[Object(r["h"])("img",{src:c.photoPath,alt:""},null,8,["src"])]),Object(r["h"])("div",null,[J,V,Object(r["h"])("a",{href:c.photoPath,target:"_blank",download:"navidad.png"},[G],8,["href"]),X,Object(r["h"])("button",{onClick:t[1]||(t[1]=function(t){return e.$router.push("/")}),class:"btn white primary--text mt-10"}," Volver a Vivir la experiencia ")])])])}var K={data:function(){return{photoPath:""}},mounted:function(){this.photoPath="https://photo-filter-backend.herokuapp.com/"+this.$route.params.photo}};n("7e7c");K.render=Y;var Q=K,Z=[{path:"/",name:"Tutorial",component:b},{path:"/camara",name:"Camera",component:F},{path:"/foto/:photo",name:"Photo",component:Q}],ee=Object(s["a"])({history:Object(s["b"])(),routes:Z}),te=ee,ne=n("5502"),re=Object(ne["a"])({state:{},mutations:{},actions:{},modules:{}});Object(r["d"])(o).use(re).use(te).mount("#app")},"5c24":function(e,t,n){},"6a31":function(e,t,n){},"6fe7":function(e,t,n){e.exports=n.p+"img/arrow_back.7e4304aa.svg"},7523:function(e,t,n){e.exports=n.p+"img/bg-screen-2.fadaf3e9.png"},"7e7c":function(e,t,n){"use strict";n("6a31")},"85cf":function(e,t,n){e.exports=n.p+"img/colgate-logo.2f5c2d3c.png"},"864d":function(e,t,n){e.exports=n.p+"img/ball.082115c3.png"},8775:function(e,t,n){e.exports=n.p+"img/pattern.f1a509e3.png"},"8f51":function(e,t,n){},"90ab":function(e,t,n){},9293:function(e,t,n){"use strict";n("5177")},"9b62":function(e,t,n){"use strict";n("af71")},af71:function(e,t,n){},bf3b:function(e,t,n){},c44a:function(e,t,n){"use strict";n("8f51")},df4e:function(e,t,n){e.exports=n.p+"img/bg-screen-1.ff7c6ff4.png"},eae6:function(e,t,n){e.exports=n.p+"img/camera.43754f28.svg"}});
//# sourceMappingURL=app.705d3909.js.map