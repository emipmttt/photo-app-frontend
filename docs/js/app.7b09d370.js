(function(e){function t(t){for(var a,o,i=t[0],s=t[1],l=t[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(f.length)f.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,i=1;i<n.length;i++){var s=n[i];0!==r[s]&&(a=!1)}a&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},c=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0127":function(e,t,n){},"15b8":function(e,t,n){e.exports=n.p+"img/colgate-logo-background.d4a6c59d.png"},"16b2":function(e,t,n){"use strict";n("1743")},1743:function(e,t,n){},2931:function(e,t,n){e.exports=n.p+"img/flip_camera.36998811.svg"},"2d39":function(e,t,n){},"435b":function(e,t,n){e.exports=n.p+"img/example.520d1796.png"},"49d0":function(e,t,n){e.exports=n.p+"img/santa-03.fe135fb5.png"},"4acf":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function r(e,t,n,r,c,o){var i=Object(a["y"])("router-view");return Object(a["r"])(),Object(a["f"])(i)}n("bf3b");var c={};n("16b2");c.render=r;var o=c,i=n("9483");Object(i["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var s=n("6c02"),l=Object(a["G"])("data-v-63181e22");Object(a["u"])("data-v-63181e22");var u={class:"second-step__santa"},d={class:"second-step__santa__logo-container primary"},f={class:"text-center pb-10"},p=Object(a["i"])("h1",{class:"font-normal italic text-3xl md:text-5xl white--text"},[Object(a["h"])(" ¡Tomate una "),Object(a["i"])("br"),Object(a["h"])(" foto con Santa! ")],-1),b=Object(a["i"])("p",{class:"white--text mt-5"}," Da clic en el botón de abajo y vive esta experiencia navideña ",-1),h={class:"second-step__santa pt-5"},m={class:"second-step__santa__logo-container primary d-absolute"},g={class:"text-center mt-10 pb-10"},v=Object(a["i"])("h1",{class:"font-normal italic text-3xl md:text-5xl white--text"},[Object(a["h"])(" Muestra un producto colgate "),Object(a["i"])("br"),Object(a["h"])(" para llamar a santa ")],-1),j=Object(a["i"])("p",{class:"white--text mt-5"}," Muestra un producto colgate, asegurate de que aparezca el logo de colgate claramente. ",-1);Object(a["s"])();var O=l((function(e,t,r,c,o,i){return Object(a["r"])(),Object(a["f"])(a["b"],{name:"fade"},{default:l((function(){return[0==o.step?(Object(a["r"])(),Object(a["f"])("main",{key:0,class:"first-step flex justify-center align-center items-center",style:"background:url('".concat(n("df4e"),"'); background-size: cover; background-position:center ;")},[Object(a["i"])("img",{class:"first-step__logo",src:n("85cf")},null,8,["src"])],4)):1==o.step?(Object(a["r"])(),Object(a["f"])("main",{key:1,class:"second-step primary",style:"background-image:url('".concat(n("8775"),"'); background-size: cover; background-position:center ;")},[Object(a["i"])("div",u,[Object(a["i"])("div",d,[Object(a["i"])("img",{src:n("85cf"),alt:""},null,8,["src"])]),Object(a["i"])("img",{class:"second-step__santa__image",src:n("7523"),alt:""},null,8,["src"])]),Object(a["i"])("div",f,[p,b,Object(a["i"])("button",{onClick:t[1]||(t[1]=function(){return i.next.apply(i,arguments)}),class:"btn white primary--text mt-10"}," Comenzar ")])],4)):2==o.step?(Object(a["r"])(),Object(a["f"])("main",{key:2,class:"second-step primary",style:"background-image:url('".concat(n("8775"),"'); background-size: cover; background-position:center ;")},[Object(a["i"])("div",h,[Object(a["i"])("div",m,[Object(a["i"])("img",{src:n("85cf")},null,8,["src"])]),Object(a["i"])("img",{class:"second-step__santa__image",style:{"border-radius":"5px"},src:n("435b")},null,8,["src"])]),Object(a["i"])("div",g,[v,j,Object(a["i"])("button",{onClick:t[2]||(t[2]=function(t){return e.$router.push("/camara")}),class:"btn white primary--text mt-10"}," Comenzar ")])],4)):Object(a["g"])("",!0)]})),_:1})}));n("90ab");var x={data:function(){return{step:0}},methods:{next:function(){this.step++}},mounted:function(){var e=this;setTimeout((function(){e.next()}),3e3)}};n("9542");x.render=O,x.__scopeId="data-v-63181e22";var y=x,w={class:"camera-container"},k={class:"camera-container__logo-container"},_={key:0,class:"modal"},C=Object(a["i"])("p",null," Muestra un producto colgate, donde aparezca el logo de colgate claramente. ",-1),S={id:"video",ref:"video","webkit-playsinline":"true",playsinline:"true"},I={class:"camera-container__controls"},$={class:"white--text"},M={key:1,class:"snap-animation"},H={ref:"canvas"};function P(e,t,r,c,o,i){var s=Object(a["y"])("Filter"),l=Object(a["y"])("Scanner"),u=Object(a["y"])("router-link"),d=Object(a["y"])("ChangeCamera"),f=Object(a["y"])("Counter"),p=Object(a["y"])("Loading");return Object(a["r"])(),Object(a["f"])(a["a"],null,[Object(a["i"])("div",w,[Object(a["i"])("div",k,[Object(a["i"])("img",{src:n("15b8"),alt:""},null,8,["src"])]),o.showHelpMessage?(Object(a["r"])(),Object(a["f"])("div",_,[C])):Object(a["g"])("",!0),Object(a["i"])("div",{class:[{"hide-camera":o.openCamera},"camera-container__image"],ref:"camera"},[o.loading?Object(a["g"])("",!0):Object(a["F"])((Object(a["r"])(),Object(a["f"])(s,{key:0},null,512)),[[a["C"],o.showFilters]]),!o.loading&&o.showScanner?Object(a["F"])((Object(a["r"])(),Object(a["f"])(l,{key:1},null,512)),[[a["C"],!o.showFilters]]):Object(a["g"])("",!0),Object(a["i"])("video",S,null,512)],2),Object(a["i"])("div",I,[Object(a["i"])("span",$,[Object(a["i"])(u,{to:"/"},{default:Object(a["E"])((function(){return[Object(a["i"])("img",{style:{width:"30px"},src:n("6fe7")},null,8,["src"])]})),_:1})]),Object(a["i"])("button",{onClick:t[1]||(t[1]=function(){return i.snap.apply(i,arguments)})},[Object(a["i"])("img",{src:n("eae6"),alt:""},null,8,["src"])]),Object(a["i"])(d,{onHideCamera:t[2]||(t[2]=function(e){return o.openCamera=!1}),onShowCamera:t[3]||(t[3]=function(e){return o.openCamera=!0}),onChange:t[4]||(t[4]=function(e){return i.changeCamera(e)})})])]),o.showCounter?(Object(a["r"])(),Object(a["f"])(f,{key:0,counter:o.counter},null,8,["counter"])):Object(a["g"])("",!0),o.showSnap?(Object(a["r"])(),Object(a["f"])("div",M,".")):Object(a["g"])("",!0),Object(a["i"])("canvas",H,null,512),o.loading?(Object(a["r"])(),Object(a["f"])(p,{key:2})):Object(a["g"])("",!0)],64)}n("a4d3"),n("e01a"),n("7db0"),n("4160"),n("ac1f"),n("5319"),n("159b"),n("96cf");var T=n("1da1"),z=n("bc3a"),E=n.n(z),D=E.a.create({baseURL:"http://localhost:3000"}),F={class:"modal-counter"},L={class:"white--text"};function R(e,t,n,r,c,o){return Object(a["r"])(),Object(a["f"])("div",F,[Object(a["i"])("h1",L,[Object(a["i"])("i",null,Object(a["A"])(n.counter),1)])])}n("a9e3");var q={props:{counter:Number}};n("f5fb");q.render=R;var U=q;function W(e,t,n,r,c,o){return Object(a["r"])(),Object(a["f"])(a["c"],{name:"fade",tag:"div"},{default:Object(a["E"])((function(){return[(Object(a["r"])(!0),Object(a["f"])(a["a"],null,Object(a["x"])(c.santaItems,(function(e,t){return Object(a["r"])(),Object(a["f"])(a["a"],null,[c.currentSanta==t?(Object(a["r"])(),Object(a["f"])("img",{key:t,draggable:"false",ref:"filter",id:"filter",style:{left:"0px",top:"0px"},class:"filter",src:e.path},null,8,["src"])):Object(a["g"])("",!0)],64)})),256))]})),_:1})}n("4de4");var A={data:function(){return{currentSanta:-1,santaItems:[{path:n("6cb4"),timeout:6e3},{path:n("49d0"),timeout:3e3}]}},methods:{mouseUp:function(){window.removeEventListener("mousemove",this.divMove,!0),window.removeEventListener("touchmove",this.divMove,!0)},mouseDown:function(e){window.addEventListener("mousemove",this.divMove,!0),window.addEventListener("touchmove",this.divMove,!0)},divMove:function(e){var t=this.$refs.filter;t.style.position="absolute",t.style.top=e.clientY-t.clientHeight/2+"px",t.style.left=e.clientX-t.clientWidth/2+"px"},changeImage:function(){var e=this;this.santaItems.length-1>=this.currentSanta+1?(this.currentSanta++,setTimeout((function(){e.changeImage()}),this.santaItems[this.currentSanta].timeout)):console.log(this.santaItems.length-1,this.currentSanta+1)}},mounted:function(){this.changeImage()}};n("c9d1");A.render=W;var G=A,N=Object(a["G"])("data-v-4e87ddba");Object(a["u"])("data-v-4e87ddba");var J=Object(a["i"])("div",{class:"blue-filter"},null,-1),V=Object(a["i"])("div",{class:"scanner"},null,-1);Object(a["s"])();var B=N((function(e,t,n,r,c,o){return Object(a["r"])(),Object(a["f"])(a["a"],null,[J,V],64)})),X={};n("eee5");X.render=B,X.__scopeId="data-v-4e87ddba";var Y=X,K=Object(a["G"])("data-v-5bec8f00");Object(a["u"])("data-v-5bec8f00");var Q=Object(a["i"])("h1",{class:"text-3xl italic white--text"},"Cargando ...",-1);Object(a["s"])();var Z=K((function(e,t,r,c,o,i){return Object(a["r"])(),Object(a["f"])("div",{class:"background",style:"background:url('".concat(n("df4e"),"'); background-size: cover; background-position:center ;")},[Q],4)})),ee={};n("d9c5");ee.render=Z,ee.__scopeId="data-v-5bec8f00";var te=ee;function ne(e,t,r,c,o,i){return Object(a["r"])(),Object(a["f"])("img",{onClick:t[1]||(t[1]=function(){return i.changeDevices.apply(i,arguments)}),style:{width:"30px"},src:n("2931")},null,8,["src"])}var ae={data:function(){return{cameras:[],cameraSelected:0}},methods:{changeDevices:function(){this.$emit("hideCamera"),this.cameras.length-1>this.cameraSelected+1?this.cameraSelected=this.cameraSelected+1:this.cameraSelected=0,this.$emit("change",this.cameras[this.cameraSelected])},gotDevices:function(e){this.cameras=[];var t=[];e.forEach((function(e){"videoinput"===e.kind&&t.push(e.deviceId)})),this.cameras=t}},mounted:function(){navigator.mediaDevices.enumerateDevices().then(this.gotDevices)}};ae.render=ne;var re=ae,ce={components:{Counter:U,Filter:G,ChangeCamera:re,Loading:te,Scanner:Y},data:function(){return{video:null,canvas:null,context:null,stream:null,alertMessage:"",showCounter:!1,showSnap:!1,counter:3,loading:!0,scanCounter:0,openCamera:!1,showFilters:!1,showScanner:!0,showHelpMessage:!1}},methods:{changeCamera:function(e){var t=this;"undefined"!==typeof this.stream&&this.stream.getTracks().forEach((function(e){e.stop()}));var n={};n.deviceId={exact:e};var a={video:n,audio:!1};navigator.mediaDevices.getUserMedia(a).then((function(e){e?(t.$refs.video.srcObject=e,t.alertMessage=""):(alert("no pudimos acceder a tu camara"),t.$router.push("/")),t.$refs.video.play()})).then().catch((function(e){console.error(e)}))},drawImage:function(e){var t=this;return Object(T["a"])(regeneratorRuntime.mark((function n(){var a,r,c,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.$refs.canvas.style.display="initial",t.$refs.canvas.width=video.clientWidth,t.$refs.canvas.height=video.clientHeight,t.context.drawImage(video,0,0,video.clientWidth,video.clientHeight),a=document.querySelector("#filter"),t.context.drawImage(a,parseInt(a.style.left.replace(/px/,"")),parseInt(a.style.top.replace(/px/,"")),a.clientWidth,a.clientHeight),e&&t.context.drawImage(document.querySelector(".camera-container__logo-container img"),20,0,document.querySelector(".camera-container__logo-container img").clientWidth,document.querySelector(".camera-container__logo-container img").clientHeight),document.querySelector("body").clientHeight,e&&window.scrollTo(0,2*document.querySelector("video").clientHeight),console.log(parseInt(a.style.left.replace(/px/,"")),parseInt(a.style.top.replace(/px/,"")),parseInt(a.style.left.replace(/px/,""))+a.clientWidth,parseInt(a.style.top.replace(/px/,""))+a.clientHeight),r=t.$refs.canvas.toDataURL("image/png"),!e){n.next=20;break}return n.next=14,D.post("/file",{image:r});case 14:c=n.sent,window.scrollTo(0,0),t.loading=!1,t.$router.push("/foto"+c.data.data.replace(/storage/g,"")),n.next=24;break;case 20:return n.next=22,D.post("/logo",{image:r});case 22:return o=n.sent,n.abrupt("return",o);case 24:t.$refs.canvas.style.display="none";case 25:case"end":return n.stop()}}),n)})))()},snap:function(){var e=this;this.showCounter=!0,this.counterInterval=setInterval((function(){e.counter--,e.counter<0&&(clearInterval(e.counterInterval),e.showCounter=!1,e.showSnap=!0,e.counter=3,e.drawImage(!0),console.log(e.stream),e.stream.getTracks().forEach((function(e){return e.stop()})),e.$refs.video.pause(),e.loading=!0,setTimeout((function(){e.showSnap=!1}),1e3))}),1e3)},initCamera:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.context=e.$refs.canvas.getContext("2d"),n={video:{facingMode:"user"},audio:!1},t.prev=2,t.next=5,navigator.mediaDevices.getUserMedia(n);case 5:a=t.sent,e.streamCamera(a),e.alertMessage="",t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),alert("no pudimos acceder a tu camara"),e.$router.push("/");case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()},scan:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.drawImage(!1);case 2:if(n=t.sent,console.log(n),a=n.data.data.find((function(e){return"Colgate"==e.description})),!a){t.next=10;break}return e.showFilters=!0,e.showHelpMessage=!1,e.showScanner=!1,t.abrupt("return");case 10:if(1!=e.scanCounter){t.next=14;break}e.showHelpMessage=!0,t.next=16;break;case 14:if(10!=e.scanCounter){t.next=16;break}return t.abrupt("return",e.$router.push("/"));case 16:e.scanCounter++,setTimeout((function(){console.log(e.scanCounter),e.scan()}),10);case 18:case"end":return t.stop()}}),t)})))()},streamCamera:function(e){var t=this;this.stream=e,e?(this.$refs.video.srcObject=e,this.alertMessage="",setTimeout((function(){t.scan()}),3e3)):(alert("no pudimos acceder a tu camara"),this.$router.push("/")),this.$refs.video.play()},resizeCamera:function(){var e=window.innerHeight||document.body.clientHeight;if(this.$refs.video.clientHeight>e){var t=e,n=this.$refs.video.clientHeight,a=100*n/t,r=a/100;this.$refs.camera.style.transform="scale(".concat(1-(r-1.1),")"),this.$refs.camera.style.marginTop="-".concat(1.5*parseInt(a),"px")}else this.$refs.camera.style.marginTop="0px",this.$refs.camera.style.transform="scale(1)"}},mounted:function(){var e=this;window.scrollTo(0,0),this.initCamera(),window.onresize=this.resizeCamera,this.$refs.video.addEventListener("loadeddata",(function(){e.resizeCamera(),e.loading=!1}))}};n("d1c2");ce.render=P;var oe=ce,ie={class:"text-center md:text-left md:flex items-center"},se={class:"polaroid-container"},le=Object(a["i"])("h1",{class:"text-3xl md:text-5xl white--text"},[Object(a["i"])("i",null,"Compartir")],-1),ue={class:"btn white primary--text mt-10"},de={class:"fb-share-button","data-href":"https://emipmttt.github.io/photo-app-frontend/#/foto/1606361246632.png","data-layout":"button","data-size":"small"},fe={class:"btn white primary--text mt-10",style:{background:"#3a559f"}},pe=Object(a["i"])("br",null,null,-1),be=Object(a["i"])("br",null,null,-1),he=Object(a["i"])("h1",{class:"text-3xl md:text-5xl white--text"},[Object(a["i"])("i",null,"Guardar foto")],-1),me=Object(a["i"])("button",{class:"btn white primary--text mt-10"},"descargar foto",-1),ge=Object(a["i"])("br",null,null,-1);function ve(e,t,r,c,o,i){return Object(a["r"])(),Object(a["f"])("main",{class:"primary flex justify-center align-center items-center pb-10",style:"background-image:url('".concat(n("8775"),"');  background-position:center ;")},[Object(a["i"])("section",ie,[Object(a["i"])("div",se,[Object(a["i"])("img",{src:o.photoPath,alt:""},null,8,["src"])]),Object(a["i"])("div",null,[le,i.verifySupportShare()?(Object(a["r"])(),Object(a["f"])("a",{key:0,onClick:t[1]||(t[1]=function(){return i.share.apply(i,arguments)}),target:"_blank",download:"navidad.png",class:"ma-4"},[Object(a["i"])("button",ue,[Object(a["i"])("img",{style:{width:"40px"},src:n("b551")},null,8,["src"])])])):Object(a["g"])("",!0),Object(a["i"])("div",de,[Object(a["i"])("a",{href:"https://www.facebook.com/sharer/sharer.php?u=".concat(i.encodeUrl(),"&src=sdkpreparse"),target:"_blank",download:"navidad.png"},[Object(a["i"])("button",fe,[Object(a["i"])("img",{src:n("c949"),style:{width:"40px"}},null,8,["src"])])],8,["href"])]),pe,be,he,Object(a["i"])("a",{href:o.photoPath,download:"navidad.png",target:"_blank"},[me],8,["href"]),ge,Object(a["i"])("button",{onClick:t[2]||(t[2]=function(t){return e.$router.push("/")}),class:"btn white primary--text mt-10"}," Volver a Vivir la experiencia ")])])],4)}var je={data:function(){return{photoPath:"",sharePath:""}},methods:{verifySupportShare:function(){return!!navigator.share},share:function(){navigator.share({title:"Colgate Santa",url:this.photoPath})},encodeUrl:function(){var e=this.photoPath+"";return e=encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/~/g,"%7E"),e}},created:function(){this.photoPath="https://photo-filter-backend.herokuapp.com/"+this.$route.params.photo,this.sharePath=location.href}};n("a6ac");je.render=ve;var Oe=je,xe=[{path:"/",name:"Tutorial",component:y},{path:"/camara",name:"Camera",component:oe},{path:"/foto/:photo",name:"Photo",component:Oe}],ye=Object(s["a"])({history:Object(s["b"])(),routes:xe}),we=ye,ke=n("5502"),_e=Object(ke["a"])({state:{scanInterval:null},mutations:{updateState:function(e,t){var n=t.prop,a=t.value;e[n]=a}},actions:{},modules:{}});Object(a["e"])(o).use(_e).use(we).mount("#app")},"6cb4":function(e,t,n){e.exports=n.p+"img/santa-01.2f7479a9.gif"},"6db3":function(e,t,n){},"6fc8":function(e,t,n){},"6fe7":function(e,t,n){e.exports=n.p+"img/arrow_back.7e4304aa.svg"},"707f":function(e,t,n){},7523:function(e,t,n){e.exports=n.p+"img/bg-screen-2.fadaf3e9.png"},"85cf":function(e,t,n){e.exports=n.p+"img/colgate-logo.2f5c2d3c.png"},8775:function(e,t,n){e.exports=n.p+"img/pattern.f1a509e3.png"},"90ab":function(e,t,n){},9542:function(e,t,n){"use strict";n("6fc8")},a6ac:function(e,t,n){"use strict";n("df57")},b551:function(e,t,n){e.exports=n.p+"img/share.c9535446.svg"},bf3b:function(e,t,n){},c949:function(e,t,n){e.exports=n.p+"img/facebook.25563ad1.png"},c9d1:function(e,t,n){"use strict";n("2d39")},d1c2:function(e,t,n){"use strict";n("4acf")},d9c5:function(e,t,n){"use strict";n("0127")},df4e:function(e,t,n){e.exports=n.p+"img/bg-screen-1.ff7c6ff4.png"},df57:function(e,t,n){},eae6:function(e,t,n){e.exports=n.p+"img/camera.43754f28.svg"},eee5:function(e,t,n){"use strict";n("707f")},f5fb:function(e,t,n){"use strict";n("6db3")}});
//# sourceMappingURL=app.7b09d370.js.map