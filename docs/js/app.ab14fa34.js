(function(e){function t(t){for(var r,c,i=t[0],s=t[1],l=t[2],d=0,p=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&p.push(o[c][0]),o[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==o[s]&&(r=!1)}r&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},o={app:0},a=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"016e":function(e,t,n){e.exports=n.p+"img/s1.cd870e19.gif"},"0e80":function(e,t,n){e.exports=n.p+"img/camera.43754f28.svg"},"10d4":function(e,t,n){"use strict";n("c3b3")},2682:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function o(e,t,n,o,a,c){var i=Object(r["t"])("router-view");return Object(r["p"])(),Object(r["d"])(i)}n("bf3b");var a={};a.render=o;var c=a,i=n("9483");Object(i["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var s=n("6c02"),l={class:"primary-gradient flex justify-center align-center items-center"},u={class:"text-center"},d=Object(r["g"])("h1",{class:"text-3xl md:text-5xl"},"¿Quieres tomarte una foto con Santa?",-1),p=Object(r["g"])("p",{class:"mt-4"}," Da clic en el botón de abajo y vive esta experiencia navideña ",-1);function f(e,t,n,o,a,c){return Object(r["p"])(),Object(r["d"])("main",l,[Object(r["g"])("section",u,[d,p,Object(r["g"])("button",{onClick:t[1]||(t[1]=function(t){return e.$router.push("/camara")}),class:"btn white primary--text mt-10"}," Comenzar ")])])}var h={methods:{start:function(){}}};h.render=f;var v=h,m={class:"camera-container"},b={ref:"camera",class:"camera-container__image"},g={id:"video",ref:"video","webkit-playsinline":"true",playsinline:"true"},j={class:"camera-container__controls"},w={key:1,class:"snap-animation"},O={ref:"canvas"};function y(e,t,o,a,c,i){var s=Object(r["t"])("Filter"),l=Object(r["t"])("Counter");return Object(r["p"])(),Object(r["d"])(r["a"],null,[Object(r["g"])("div",m,[Object(r["g"])("div",b,[Object(r["g"])(s),Object(r["g"])("video",g,null,512)],512),Object(r["g"])("div",j,[Object(r["g"])("button",{onClick:t[1]||(t[1]=function(){return i.snap.apply(i,arguments)})},[Object(r["g"])("img",{src:n("0e80"),alt:""},null,8,["src"])])])]),c.showCounter?(Object(r["p"])(),Object(r["d"])(l,{key:0,counter:c.counter},null,8,["counter"])):Object(r["e"])("",!0),c.showSnap?(Object(r["p"])(),Object(r["d"])("div",w,".")):Object(r["e"])("",!0),Object(r["g"])("canvas",O,null,512)],64)}n("ac1f"),n("5319"),n("96cf");var x=n("1da1"),k={class:"modal-counter"},C={class:"white--text"};function $(e,t,o,a,c,i){return Object(r["p"])(),Object(r["d"])("div",k,[Object(r["g"])("img",{src:n("864d")},null,8,["src"]),Object(r["g"])("h1",C,Object(r["v"])(o.counter),1)])}var I={props:{counter:Boolean}};n("6289");I.render=$;var M=I;function S(e,t,o,a,c,i){return Object(r["p"])(),Object(r["d"])("img",{draggable:"false",ref:"filter",id:"filter",style:{left:"0px",top:"0px"},class:"filter",src:n("016e"),onMousedown:t[1]||(t[1]=function(){return i.mouseDown.apply(i,arguments)}),onTouchstart:t[2]||(t[2]=function(){return i.mouseDown.apply(i,arguments)})},null,40,["src"])}n("4de4");var P={methods:{mouseUp:function(){window.removeEventListener("mousemove",this.divMove,!0),window.removeEventListener("touchmove",this.divMove,!0)},mouseDown:function(e){window.addEventListener("mousemove",this.divMove,!0),window.addEventListener("touchmove",this.divMove,!0)},divMove:function(e){var t=this.$refs.filter;t.style.position="absolute",t.style.top=e.clientY-t.clientHeight/2+"px",t.style.left=e.clientX-t.clientWidth/2+"px"}},mounted:function(){window.addEventListener("mouseup",this.mouseUp,!1),window.addEventListener("touchleave",this.mouseUp,!1),document.querySelector("#video").addEventListener("click",this.divMove)}};n("95c3");P.render=S;var H=P,_=n("bc3a"),L=n.n(_),T=L.a.create({baseURL:"https://photo-filter-backend.herokuapp.com/"}),E={components:{Counter:M,Filter:H},data:function(){return{video:null,canvas:null,context:null,stream:null,alertMessage:"",showCounter:!1,showSnap:!1,counter:3,counterInterval:null}},methods:{drawImage:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$refs.canvas.style.display="initial",e.$refs.canvas.width=video.clientWidth,e.$refs.canvas.height=video.clientHeight,e.context.drawImage(video,0,0,video.clientWidth,video.clientHeight),n=document.querySelector("#filter"),e.context.drawImage(n,parseInt(n.style.left.replace(/px/,"")),parseInt(n.style.top.replace(/px/,"")),n.clientWidth,n.clientHeight),document.querySelector("body").clientHeight,window.scrollTo(0,2*document.querySelector("video").clientHeight),console.log(parseInt(n.style.left.replace(/px/,"")),parseInt(n.style.top.replace(/px/,"")),parseInt(n.style.left.replace(/px/,""))+n.clientWidth,parseInt(n.style.top.replace(/px/,""))+n.clientHeight),r=e.$refs.canvas.toDataURL("image/png"),t.next=12,T.post("/file",{image:r});case 12:o=t.sent,window.scrollTo(0,0),e.$router.push("/foto"+o.data.data.replace(/storage/g,""));case 15:case"end":return t.stop()}}),t)})))()},snap:function(){var e=this;this.showCounter=!0,this.counterInterval=setInterval((function(){e.counter--,e.counter<0&&(clearInterval(e.counterInterval),e.showCounter=!1,e.showSnap=!0,e.counter=3,e.drawImage(),setTimeout((function(){e.showSnap=!1}),1e3))}),1e3)},initCamera:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.context=e.$refs.canvas.getContext("2d"),n={video:{facingMode:"user"},audio:!1},t.prev=2,t.next=5,navigator.mediaDevices.getUserMedia(n);case 5:r=t.sent,e.streamCamera(r),e.alertMessage="",t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),alert("no pudimos acceder a tu camara"),e.$route.push("/");case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()},streamCamera:function(e){this.stream=e,e?(this.$refs.video.srcObject=e,this.alertMessage=""):(alert("no pudimos acceder a tu camara"),this.$route.push("/")),this.$refs.video.play()},resizeCamera:function(){var e=window.innerHeight||document.body.clientHeight;if(this.$refs.video.clientHeight>e){var t=e,n=this.$refs.video.clientHeight,r=100*n/t,o=r/100;this.$refs.camera.style.transform="scale(".concat(1-(o-1.1),")"),this.$refs.camera.style.marginTop="-".concat(1.5*parseInt(r),"px")}else this.$refs.camera.style.marginTop="0px",this.$refs.camera.style.transform="scale(1)"}},mounted:function(){window.scrollTo(0,0),this.initCamera(),window.onresize=this.resizeCamera,this.$refs.video.addEventListener("loadeddata",this.resizeCamera),this.resizeCamera()}};n("a1ac");E.render=y;var z=E,D={class:"primary-gradient flex justify-center align-center items-center"},R={class:"text-center md:text-left md:flex items-center"},U={class:"polaroid-container"},q=Object(r["g"])("h1",{class:"text-3xl md:text-5xl"},[Object(r["f"])(" ¡Gracias por Participar "),Object(r["g"])("br"),Object(r["f"])(" en la experiencia! ")],-1),W=Object(r["g"])("br",null,null,-1),F=Object(r["g"])("button",{class:"btn white primary--text mt-10"},"descargar foto",-1),A=Object(r["g"])("br",null,null,-1);function N(e,t,n,o,a,c){return Object(r["p"])(),Object(r["d"])("main",D,[Object(r["g"])("section",R,[Object(r["g"])("div",U,[Object(r["g"])("img",{src:a.photoPath,alt:""},null,8,["src"])]),Object(r["g"])("div",null,[q,W,Object(r["g"])("a",{href:a.photoPath,target:"_blank",download:"navidad.png"},[F],8,["href"]),A,Object(r["g"])("button",{onClick:t[1]||(t[1]=function(t){return e.$router.push("/")}),class:"btn white primary--text mt-10"}," Volver a Vivir la experiencia ")])])])}var B={data:function(){return{photoPath:""}},mounted:function(){this.photoPath="https://photo-filter-backend.herokuapp.com/"+this.$route.params.photo}};n("10d4");B.render=N;var J=B,V=[{path:"/",name:"Tutorial",component:v},{path:"/camara",name:"Camera",component:z},{path:"/foto/:photo",name:"Photo",component:J}],G=Object(s["a"])({history:Object(s["b"])(),routes:V}),Q=G,X=n("5502"),Y=Object(X["a"])({state:{},mutations:{},actions:{},modules:{}});Object(r["c"])(c).use(Y).use(Q).mount("#app")},"5a3d":function(e,t,n){},6289:function(e,t,n){"use strict";n("2682")},"864d":function(e,t,n){e.exports=n.p+"img/ball.082115c3.png"},"95c3":function(e,t,n){"use strict";n("5a3d")},a1ac:function(e,t,n){"use strict";n("abf2")},abf2:function(e,t,n){},bf3b:function(e,t,n){},c3b3:function(e,t,n){}});
//# sourceMappingURL=app.ab14fa34.js.map